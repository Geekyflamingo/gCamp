<div class = "container">

<h1> <%= @project.name %> : Manage Members </h1>




<ol class="breadcrumb">
  <li><a><%= link_to "Projects", projects_path %> </a></li>
  <li><a> <%= link_to @project.name, project_path(@project) %></li>
  <li class= "active">Memberships</li>
</ol>

<div class ="form-horizontal">
<%= render "shared/errors", instance: @membership %>
</div>



  <div class="well form-inline">
  <%= form_for [@project, @membership] do |f| %>
  <div class="form-group">
   <%= f.collection_select(:user_id, User.all, :id, :full_name,
   {include_blank: "Please select a user..."}, {class:"form-control"}) %>
  </div>
  <div class="form-group">
   <%= f.select(:role, ["owner", "member"], {}, {class:"form-control"}) %>
  </div>

  <%= f.submit "Add New Member", class: "btn btn-primary" %>
  <% end %>
  </div>
    

  <table class = "table">

    <tbody>
      <% @memberships.each do |membership| %>
        <tr>
          <%= form_for [@project, membership] do |f| %>
          <td><%= link_to membership.user.full_name, user_path(membership.user) %></td>
          <td>
            <%= f.select :role, ["owner", "member"],{include_blank: membership.role}, {class: "form-control"} %>
          </td>
              <td><%= f.submit "Update", class: "btn btn-primary" %></td>
          <%end%>
        <td><%= link_to "", project_membership_path(@project, membership), method: :delete, data: { confirm: 'Are you sure?' },
        class: "glyphicon glyphicon-remove" %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
